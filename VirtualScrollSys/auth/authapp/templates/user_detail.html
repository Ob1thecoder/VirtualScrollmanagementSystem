{% include 'top.html' %}
{% load static %}  <!-- Load static files for default image -->

<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <title>Manage Scrolls</title>
</head>
<body>

<section id="admin-info-section">
    <div id="admin-info" class="page-container">             
        <!-- Page Section -->
        <div style="padding-left: 25px; margin-right: 25px; margin-top: 25px;">
            <h3 style="margin-top: 20px; margin-bottom: 20px; color: #EFF0F2;">My Profile</h3>

            <!-- Profile Information Card -->
            <div class="container-8" style="margin-bottom: 25px; margin-top: 130px;">
                <div class="card p-5" style="background-color: #222024; color: #EFF0F2; border-radius: 15px; margin-left: 45px; margin-right: 45px;">
                    <div class="row" style="margin-bottom: 20px; margin-top: 60px;">
                        <!-- Placeholder for User's Personal Details -->
                        <div class="col-md-6">
                            <div class="card" style="background-color: #222024; color: #EFF0F2; border-radius: 15px; border-color: #353335;">
                                <h5 class="card-header mb-2 pt-3 pb-3" style="background: linear-gradient(90deg, hsla(280, 84%, 41%, 1) 0%, hsla(218, 97%, 56%, 1) 100%); border-radius: 15px 15px 0px 0px;">Personal Details</h5>
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>Full Name</strong></p></div>
                                    <div class="col-sm-8" id="admin-personal-details-name"><p> ... loading ...</p></div>
                                </div>                                
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>Email</strong></p></div>
                                    <div class="col-sm-8" id="admin-personal-details-email"><p> ... loading ...</p></div>
                                </div>                                
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>Phone Number</strong></p></div>
                                    <div class="col-sm-8" id="admin-personal-details-phone"><p> ... loading ...</p></div>
                                </div>                                
                            </div>
                        </div>
                        <!-- Placeholder for User's Account Details -->
                        <div class="col-md-6">
                            <div class="card" style="background-color: #222024; color: #EFF0F2; border-radius: 15px; border-color: #353335;">
                                <h5 class="card-header mb-2 pt-3 pb-3" style="background: linear-gradient(90deg, hsla(280, 84%, 41%, 1) 0%, hsla(218, 97%, 56%, 1) 100%); border-radius: 15px 15px 0px 0px;">Account Details</h5>
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>Username</strong></p></div>
                                    <div class="col-sm-8" id="admin-account-details-username"><p> ... loading ...</p></div>
                                </div>                                
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>ID Key</strong></p></div>
                                    <div class="col-sm-8" id="admin-account-details-idkey"><p> ... loading ...</p></div>
                                </div>                                
                                <div class="row" style="margin-left: 8px;">
                                    <div class="col-sm-4"><p><strong>Role</strong></p></div>
                                    <div class="col-sm-8" id="admin-account-details-role"><p> ... loading ...</p></div>
                                </div>    
                            </div>
                        </div>
                    </div>
                    <div class="card" style="background-color: #222024; color: #EFF0F2; border-radius: 15px; border-color: #353335;">
                        <!-- Buttons for editing profile and changing password -->
                        <div class="row align-items-center">
                            <div class="col-md-2"><h5 class="card-header pt-3 pb-3" style="background: linear-gradient(90deg, hsla(280, 84%, 41%, 1) 0%, hsla(218, 97%, 56%, 1) 100%); border-radius: 15px 0px 0px 15px;">Security Action</h5></div>
                            <div class="col-md-1" style="margin-left: 8px;">
                                <a href="{% url 'edit_profile' %}">
                                    <button class="btn btn-outline-light custom-btn" style="border-radius: 25px;">Edit Profile <i class="fa fa-edit"></i></button>
                                </a>
                            </div>
                            <div class="col-md-7" style="margin-left: 35px;">                                
                                <a href="{% url 'change_password' %}">
                                    <button class="btn btn-outline-light custom-btn" style="border-radius: 25px;">Change Password <i class="fa fa-key"></i></button>
                                </a>
                            </div>
                            <style>
                                .custom-btn:hover {
                                    background: linear-gradient(90deg, hsla(280, 84%, 41%, 1) 0%, hsla(218, 97%, 56%, 1) 100%);
                                    color: #EFF0F2;
                                }

                            </style>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Placeholder for Profile Picture -->
            <div id="bio" class="text-center" style="position: relative; margin-bottom: 60px;">
                <img id="profile-picture" 
                    src="{% if admin.profile_picture %}{{ admin.profile_picture.url }}{% else %}{% static 'images/avatar.jpg' %}{% endif %}" 
                    alt="Profile Picture-Freepik Avatar" 
                    class="profile-pic mx-auto d-block"
                    style="width: 200px; height: 200px; border-radius: 50%; border: 4px solid #EFF0F2; position: relative; bottom: +570px;">
                <!-- Wizard Hat on top-left corner -->
                <img src="{% static 'images/wizard-hat.png' %}" alt="Wizard Hat"
                    style="position: relative; bottom: +820px; right: 10px; rotate: -5deg; height: 100px;">
                </div>
        </div>
    </div>
</section>

<script>
    // Function to fetch and display admin's own information
    function loadAdminInfo() {
        fetch('/admin-info/', {  // Replace this endpoint with the correct Django view URL if needed
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            }
        })
        .then(response => response.json())
        .then(admin => {
            if (admin) {                
                // Update personal details
                document.getElementById('admin-personal-details-name').innerHTML = `<p>${admin.fullname}</p>`;
                document.getElementById('admin-personal-details-email').innerHTML = `<p>${admin.email}</p>`;
                document.getElementById('admin-personal-details-phone').innerHTML = `<p>${admin.phone}</p>`;

                // Update account details
                document.getElementById('admin-account-details-username').innerHTML = `<p>${admin.username}</p>`;
                document.getElementById('admin-account-details-idkey').innerHTML = `<p>${admin.IDkey}</p>`;
                document.getElementById('admin-account-details-role').innerHTML = `<p>${admin.role}</p>`;
                
                
            }
        })
        .catch(error => {
            console.error('Error fetching admin info:', error);
            document.getElementById('admin-info').innerText = 'Error fetching admin info';
        });
    }

    // Load admin info when the page is loaded
    document.addEventListener('DOMContentLoaded', function() {
        loadAdminInfo();
    });
</script>



</body>
